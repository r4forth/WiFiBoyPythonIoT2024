# 20. æ–‡å­—è½‰èªéŸ³æ¨¡å¡Š

é€™æ¬¡çš„ç·¨å¯«éµäººè³½æ–‡ç« çš„éç¨‹ï¼Œä¸€ä½æœƒå‹è·Ÿæˆ‘ä»‹ç´¹äº†é€™å€‹æ–‡å­—è½‰èªéŸ³çš„æ¨¡çµ„ï¼Œä¸¦å‚³ä¾†ä»¤äººé©šè±”çš„å±•ç¤ºå½±ç‰‡:


![](/img/20/Python20_01.png)

å¿ƒæƒ³:

1. Raspberry Pi Pico èƒ½ç”¨ï¼Œé‚£éº¼ç©å­¸æ©Ÿä¸€å®šä¹Ÿèƒ½ç”¨ã€‚
2. å¹¾åå¡ŠéŒ¢çš„æ¨¡çµ„å°±èƒ½åšåˆ°é€™æ¨£çš„åŠŸèƒ½ï¼Œé‚£å·¥å» ä¼‘æ¯ã€ç”¨é¤ï¼Œè¨ªå®¢å¤–æ‰¾ç­‰å»£æ’­è¨Šæ¯å°±èƒ½çµåˆ WiFiBoy ä¾†è™•ç†äº†ã€‚

å› æ­¤æˆ‘å€‘å°±ä¾†åæ‰¾æ–‡ä¸­çš„å½±ç‰‡æ˜¯åˆ©ç”¨å“ªå€‹ MicroPython çš„æ¨¡çµ„èˆ‡ä½¿ç”¨å“ªä¸€å€‹æ–‡å­—è½‰èªéŸ³çš„æ¨¡çµ„ä¾†å¯¦ç¾ã€‚


## å¦‚ä½•æ‰¾åˆ° MicroPython çš„ç¬¬ä¸‰é©…å‹•ç¨‹å¼èˆ‡æ¨¡çµ„

æˆ‘å€‘æ˜¯åˆ©ç”¨é€™å€‹é—œéµå­— **Awesome MicroPython** æœå°‹ï¼Œæ‰¾åˆ°é€™å€‹å…§å®¹è±å¯Œçš„å¥—ä»¶æ•´ç†ç¶²ç«™:

[Awesome MicroPython](https://awesome-micropython.com/)

![](/img/20/Python20_02.png)

ç„¶å¾Œåœ¨åˆ†é¡ **Text-to-Speech** é€™å€‹ä½ç½®ï¼Œæ‰¾åˆ°äº†ä¸€å€‹åå« [**micropython-SYN6988**](https://github.com/scruss/micropython-SYN6988) çš„å°ˆæ¡ˆï¼Œé»é¸é€²å»ï¼Œç™¼ç¾å°ˆæ¡ˆçš„ä»‹ç´¹å½±ç‰‡å°±æ˜¯æœ‹å‹å‚³ä¾†çš„é€™å¼µã€‚

æˆ‘å€‘ä¾†å…ˆä¾†è®€è®€å°ˆæ¡ˆè£¡çš„èªªæ˜ï¼Œç ”ç©¶é€™å€‹æ™¶ç‰‡åˆ°åº•è¦æ€éº¼ä½¿ç”¨:

èªªæ˜æª”è£¡é¢æœ‰é™„ä¸€å¼µç¡¬é«”èªªæ˜çš„ç…§ç‰‡:


![](https://github.com/scruss/micropython-SYN6988/raw/main/images/syn6988-front.webp)

ä½œè€…æ˜¯é€™æ¨£é™³è¿°çš„:

```
SYN6988 æ˜¯å¹¾ç¨®èªéŸ³åˆæˆå™¨/æ–‡æœ¬è½‰èªéŸ³å™¨ä¹‹ä¸€ ï¼ˆTTSï¼‰ æ¨¡çµ„åœ¨å…¨çƒé€Ÿè³£é€šå’Œå…¶ä»–å¸‚å ´ä¸Šåƒ¹æ ¼ä½å»‰ ä¾›æ‡‰å•†ã€‚é€™ä»¤äººå°è±¡æ·±åˆ»ï¼Œå› ç‚ºï¼š

* å®ƒç”¢ç”Ÿæ¸…æ™°çš„è‹±èªèªéŸ³ï¼Œè€Œä¸æ±‚åŠ©æ–¼éŸ³ç´ ;
* å®ƒæœ‰ä¸€å€‹ç·šè·¯è¼¸å‡º/è€³æ©Ÿæ’å­”å’Œå°æšè²å™¨è¼¸å‡ºï¼Œå…©è€…éƒ½æ˜¯ å…·æœ‰éå¸¸ä¹¾æ·¨çš„éŸ³è¨Š;
* å®ƒå¾ˆå®¹æ˜“é€šéç•°æ­¥ä¸²è¡Œæˆ– SPIï¼ˆæ­¤è™•æœªå˜—è©¦å¾Œè€…ï¼‰;
* å®ƒåœ¨éŸ³é‡ã€éŸ³èª¿å’Œèªé€Ÿä¸Šæœ‰ä¸€å®šçš„éˆæ´»æ€§;
* å®ƒå…§ç½®äº†ä¸€å€‹å¤§å‹çš„è­¦å ±éŸ³åº«;
* å®ƒä¸è²´ï¼Œç´„ç‚º ğŸ‡¨ğŸ‡¦ 15 ç¾å…ƒã€‚
```

æ¥è…³åœ–:

```
SYN6988        MicroPython Board     Raspberry Pi Pico
=========      ===================   ===================   
    RDY            Digital Input         GPIO 2
	RXD            UART TXD              GPIO 0 (UART 0 TX)
	TXD            UART RXD              GPIO 1 (UART 0 RX)
	GND            Ground                Any GND pin
	3V3            3V3 supply            3V3(OUT)
```

## ç©å­¸æ©Ÿè¦æ€éº¼æ¥ä¸Šé€™å€‹æ–‡å­—è½‰èªéŸ³çš„æ¨¡çµ„?

æ ¹æ“š MicroPython çš„å®˜æ–¹æ–‡ä»¶:

https://docs.micropython.org/en/latest/esp32/quickref.html

![](/img/20/Python20_03.png)

æˆ‘å€‘ä¸èƒ½ä½¿ç”¨ UART0 ï¼Œå› ç‚º MicroPython RPEL çš„ç’°å¢ƒå·²ç¶“å…ˆä½”ç”¨äº†ã€‚
 

æˆ‘å€‘å¾æ¥è…³åœ–è‘—æ‰‹

```
SYN6988        MicroPython Board     WiFiBoy Python ç©å­¸æ©Ÿ
=========      ===================   ===================   
    RDY            Digital Input       GPIO 2 
	RXD            UART TXD            GPIO 5 (UART 2 TX)
	TXD            UART RXD            GPIO21 (UART 2 RX)
	GND            Ground              GND(WBIO 2)
	3V3            3V3 supply          3V3(OUT) (WBIO 3)
```

![WiFiBoy å¯¦éš›æ¥ç·šåœ–](/img/20/Python20_04.png)

![SYN6988 æ¥ç·šåœ–](/img/20/Python20_05.png)


## SYN6988 èªéŸ³æ¨¡çµ„æ‰‹å†Š

SYN6988 ä¸­è‹±æ–‡èªéŸ³åˆæˆæ™¶ç‰‡æ˜¯ **å®‡éŸ³å¤©ä¸‹** å…¬å¸ 2020 å¹´æ¨å‡ºçš„ç”¢å“ã€‚å®˜ç¶²é€£çµç‚º [**http://www.voicetx.com/product/detail.html?id=11**](http://www.voicetx.com/product/detail.html?id=11)ï¼Œæ†‘è—‰è‘—æ¨¡çµ„åƒ¹æ ¼å„ªå‹¢(ç´„å…©ç™¾å…ƒå°å¹£å·¦å³)ï¼Œå¾ˆå—å¸‚å ´æ­¡è¿ã€‚åƒæ˜¯é†«é™¢å«è™Ÿã€æ™ºæ…§åœè»Šã€å·¥å» å»£æ’­çš„æ‡‰ç”¨å ´æ™¯éƒ½å¯çœ‹åˆ°é€™å€‹ç”¢å“ã€‚


[æŠ€è¡“æ–‡æª”é€£çµ](http://www.doc.voicetx.com/home/SYN6988)

### æ§åˆ¶æ¨™è¨˜èªªæ˜

å› ç‚ºé€™æ¨¡çµ„æ˜¯æ–‡å­—è½‰èªéŸ³çš„æ™¶ç‰‡ï¼Œå¯æ¥å—å‚³å…¥GBK æˆ–æ˜¯ Unicode å­—ä¸²ï¼Œå°±èƒ½ç”¢ç”Ÿç›¸å°æ‡‰çš„ä¸­è‹±æ–‡èªéŸ³ã€‚ä½†å› ç‚ºä¸åŒèªè¨€çš„è²èª¿ã€ä¸­è‹±æ–‡èˆ‡æ•¸å­—æ··åˆæ™‚æœ‰ä¸åŒçš„ç™¼éŸ³ã€èªèª¿èˆ‡èªé€Ÿã€‚å› æ­¤ï¼Œè¦è®“ç³»çµ±ç™¼éŸ³èƒ½å¤ æ¥è¿‘çœŸäººï¼Œå°±éœ€è¦é‡å°å‚³å…¥çš„å­—ä¸²åšä¸€äº›æ¨™è¨˜è™•ç†ã€‚é–‹ç™¼è€…æ–‡ä»¶æœ€é‡è¦çš„éƒ¨ä»½ä¹Ÿæ˜¯é€™å€‹ç« ç¯€ã€‚ä¸€èˆ¬ä½¿ç”¨è€…çŸ¥é“å¦‚ä½•æ§åˆ¶å‚³å…¥çš„å­—ä¸²ï¼Œå°±èƒ½å¾ˆè¼•é¬†åœ°ä½¿ç”¨ WiFiBoy Python ç©å­¸æ©Ÿç‚ºè‡ªå·±å®¶è£¡æˆ–æ˜¯å…¬å¸ï¼Œåšä¸€å€‹è³‡è¨ŠèªéŸ³è£ç½®ï¼Œç”šè‡³è¦å®ƒå¹«æ‚¨è®€å ±ä¹Ÿå¯ä»¥ã€‚

é‡è¦çš„å¹¾å€‹åƒæ•¸æœ‰:

* æ§åˆ¶èªé€Ÿ:  [S*]ï¼Œé è¨­ [S5]ï¼Œèªé€Ÿå€¼: 0 ~ 10ã€‚æ•¸å€¼è¶Šå°ï¼Œèªé€Ÿè¶Šæ…¢ã€‚
* éŸ³é‡èª¿ç¯€:  [V*]ï¼Œé è¨­ [V5]ï¼ŒéŸ³é‡å€¼: 0 ~ 10ã€‚æ•¸å€¼è¶Šå°ï¼Œè²éŸ³ç´„å°ã€‚
* æç¤ºéŸ³æ¨‚:  [X*]ï¼Œé è¨­ [X1]ï¼Œ0 ä»£è¡¨ä¸ä½¿ç”¨æç¤ºéŸ³ï¼Œ1 ä»£è¡¨ä½¿ç”¨æç¤ºéŸ³ã€‚
* ä¸­æ–‡ç™¼éŸ³é¢¨æ ¼ : [F*]ï¼Œé è¨­ [F1]ï¼Œ0 ä¸€å­—ä¸€é “ï¼Œ1 å¹³é †å¿µå‡ºã€‚
* ä¸­æ–‡è®€æ¨™é» : [B*]ï¼Œé è¨­ [B0]ï¼Œ0 ä¸è®€æ¨™é»ï¼Œ1 è®€æ¨™é»ã€‚

è‹±æ–‡èªéŸ³ç›¸é—œè¨­å®š

* èªç¨®è¨­å®š : [G*]ï¼Œé è¨­ [G0]ï¼Œ0 è‡ªå‹•åˆ¤æ–·ï¼Œ1 è¨­å®šæˆä¸­æ–‡ï¼Œ 2 è¨­å®šæˆè‹±æ–‡ã€‚
* è‹±æ–‡0è®€æ³•: [o*]ï¼Œé è¨­ [o0]ï¼Œ0 è®€æˆ zeroï¼Œ1 å¼·åˆ¶è®€æˆè‹±æ–‡ o éŸ³ã€‚
* è‹±æ–‡éŸ»å¾‹åŠ å¼·: [K*]ï¼Œé è¨­ [K0]ï¼Œ0 éŸ»å¾‹ä¸åœé “ã€1 éŸ»å¾‹åœé “åŠ é•· 50 æ¯«ç§’ã€æ¯å®¶ä¸€å¤šåœé “ 50*æ•¸å­— çš„é•·åº¦ã€‚
* è‹±æ–‡å–®è©ç™¼éŸ³æ–¹å¼: [H*]ï¼Œé è¨­ [H0]ï¼Œ0 è‡ªå‹•åˆ¤æ–·ã€‚

å¯¦ä¾‹èªªæ˜:

1. `[n2]æœ‰123å…¬æ–¤é‡ã€‚[d]` è®€åšã€Œæœ‰ä¸€ç™¾äºŒåä¸‰å…¬æ–¤é‡ã€ã€‚
2. `[v5]æ­¡è¿åƒåŠ [v8]2024 ITHomeéµäººè³½[v2]ï¼ŒWiFiBoy æ­¡è¿æ‚¨![d]`

## å¦‚ä½•ä½¿ç”¨ MicroPython SYN6988 çš„é©…å‹•ç¨‹å¼

å°‡ [**micropython-SYN6988**](https://github.com/scruss/micropython-SYN6988) å°ˆæ¡ˆæ•´å€‹ä¸‹è¼‰ï¼Œè§£å£“ç¸®å°ˆæ¡ˆæª”ï¼Œè£¡é¢æœ‰ä¸€å€‹ **syn6988.py**ï¼Œå°‡é€™å€‹ py æª”ä¸Šå‚³åˆ°ç©å­¸æ©Ÿ Flash çš„ lib ç›®éŒ„ä¸‹å³å¯ã€‚

è«‹åƒè€ƒæˆ‘å€‘çš„ç¯„ä¾‹æ•™å­¸:

### å¿µæ‰‹æ©Ÿè™Ÿç¢¼

```
import time
import machine
import lib.syn6988
# WiFiBoy æ¥è…³
# GND   ---> GND
# 3V3   ---> 3V3
# IO2   ---> RDY  
# IO5   ---> TX
# IO21  ---> RX
### setup device
ser = machine.UART(
    2, baudrate=9600, bits=8, parity=None, stop=1, tx=5, rx=21
)

busyPin = machine.Pin(21, machine.Pin.IN, machine.Pin.PULL_UP)
s = lib.syn6988.SYN6988(ser, busyPin)

def speak_and_spell(r):
    # print then speak string r
    s.speak(r)
    return s

str = "0912-345678 ä¾†é›»"
speak_and_spell(str)
```

### å¿µæ™‚é–“æ—¥æœŸ

```
str2 = "[g1]2024-08-20 10:36:28"
speak_and_spell(str2)
```


### ç³»çµ±æç¤ºéŸ³é–‹é ­ï¼Œä¸¦åŠ å¼·èªèª¿

```
str3 = "[x1]sound112[m3][g1][v6][n2][i1][y1][f0][b1]2024 ITHome éµäººè³½å®Œè³½!"
speak_and_spell(str3)
```

### ä¸­è‹±æ–‡æ··å”¸

```
speak_and_spell(
    "[g2]Hello! WiFiBoy[g1]ä½ å¥½![g2]" )  # language selection with [g*]
speak_and_spell("I can speak in English, and also in Chinese:")
speak_and_spell("[g1]åƒé‡Œä¹‹è¡Œï¼Œå§‹æ–¼è¶³ä¸‹ã€‚[g2]")
speak_and_spell(
    "which means: a journey of five hundred kilometres starts with the first step")
```

## åƒè€ƒè³‡æ–™

1. [micropython-SYN6988](https://github.com/scruss/micropython-SYN6988) 
2. [MicroPython UART æ–‡ä»¶](https://docs.micropython.org/en/latest/esp32/quickref.html)
3. [SYN6988 é–‹ç™¼è€…æ‰‹å†Š](http://www.doc.voicetx.com/home/SYN6988)
